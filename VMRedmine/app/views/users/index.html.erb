<h1 style="float:left;">Users</h1><div style="clear:both;"></div><div id="somediv"></div><div class="Flexgrids">      <script type="text/javascript">    var idt=0;      var $dialog;    var $editDialog;    var $showDialog;    var id;    $(document).ready(function(){	    	$("#flex1").flexigrid({    			url: 'http://localhost:3000/users/grid_data',    			dataType: 'json',    			colModel : [    				{display: '<input type="checkbox" id="chkAllFile" onclick="javascript:CheckAll(this);"/>', name: '', width: 20, sortable: false, align: 'center', process: AttachCheckBox},            {display: 'Edit', name : 'edit', width : 20, sortable : true, align: 'center',process:EditUser},    				{display: 'Delete', name : 'delete', width : 30, sortable : true, align: 'center',process:DeleteUser},    				{display: 'ID', name : 'id', width : 20, sortable : true, align: 'center'},    				{display: 'First Name', name : 'firstname', width : 90, sortable : true, align: 'left',process:ShowUser},    				{display: 'Last Name', name : 'lastname', width : 90, sortable : true, align: 'left'},    				{display: 'Email', name : 'email', width : 180, sortable : true, align: 'left'}				    				],    			buttons : [    				{name: 'Add User', bclass: 'add', onpress : AddUser},    				{separator: true}    				],    			searchitems : [    				{display: 'firstname', name : 'firstname'},    				{display: 'email', name : 'email', isdefault: true}    				],    			sortname: "id",    			sortorder: "asc",    			usepager: true,    			useRp: true,    			rp: 10,			    			showTableToggleBtn: true,    			width: 515,    			height: 255    			});         $dialog = $('<div></div>')                         .load('<%= url_for new_user_path %> #dvUserForm')                         .dialog({                               autoOpen: false,                               width:450,                               height:550,                               title: 'Add User'                         });           });        function AddUser()    {                      $dialog.dialog('open');     }    function EditUser(celDiv, id) {        	 $(celDiv).click(function() {                idt=$(this).closest('tr').find('td:nth(3)')[0].textContent;                var i = document.createElement('a');                 var url = '<%= edit_user_path('idt') %> #dvEditUser'; //new change                url = url.replace('idt',""+(idt*1));   //new change                $editDialog = $('<div></div>')                         .load(url)                         .dialog({                               autoOpen: false,                               width:450,                               height:580,                                 title: 'Edit User'                         });                  $editDialog.dialog('open');           });      }    function ShowUser(celDiv, id) {           $(celDiv).addClass("link");        	 $(celDiv).click(function() {                idt=$(this).closest('tr').find('td:nth(3)')[0].textContent;                fname=$(this).closest('tr').find('td:nth(4)')[0].textContent;                var i = document.createElement('a');                 var url = '<%= user_path('idt') %> #dvShowUser'; //new change                url = url.replace('idt',""+(idt*1));   //new change                $showDialog = $('<div></div>')                         .load(url)                         .dialog({                               autoOpen: false,                               width:400,                               height:300,                                 title:fname                         });                  $showDialog.dialog('open');           });      }     function DeleteUser(celDiv, id) {        	 $(celDiv).click(function(e) {              e.preventDefault();              idt=$(this).closest('tr').find('td:nth(3)')[0].textContent;              confirm("Are you sure ?", function () {          		  window.location.href = "users/destroy/"+idt;	          		});              });      }    function confirm(message, callback) {    	$('#confirm').modal({    		closeHTML: "<a href='#' title='Close' class='modal-close'>x</a>",    		position: ["20%",],    		overlayId: 'confirm-overlay',    		containerId: 'confirm-container',     		onShow: function (dialog) {    			var modal = this;        			$('.message', dialog.data[0]).append(message);        			// if the user clicks "yes"    			$('.yes', dialog.data[0]).click(function () {    				// call the callback    				if ($.isFunction(callback)) {    					callback.apply();    				}    				// close the dialog    				modal.close(); // or $.modal.close();    			});    		}    	});    }        function AttachCheckBox(celDiv, id) {          $(celDiv).html('<input id="chkSingle_' + id + '" type="checkbox" value ='+ id +' class="datacb"/>');	    $("#flex1 tr").each(function(n) { $(this).addClass("dms");});    }        function CheckAll(obj) {      $('#flex1 :checkbox').each(function() {this.checked = obj.checked; });          }       </script><table id="flex1" style="display:none"></table>    <div id='confirm'>        <div class='header'><span>Confirm</span></div>            <div class='message'></div>            <div class='buttons'>            <div class='no simplemodal-close'>No</div><div class='yes'>Yes</div>        </div>    </div> </div>